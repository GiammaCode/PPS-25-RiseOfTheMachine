<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title id="title">
          model\strategy\PlayerAI.scala.html
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/css/theme.default.min.css" type="text/css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.20.1/js/jquery.tablesorter.min.js"></script><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css"/><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script><script type="text/javascript">
        $(document).ready(function() {$(".tablesorter").tablesorter();});
      </script>
        <style>
          table.codegrid { font-family: monospace; font-size: 12px; width: auto!important; }table.statementlist { width: auto!important; font-size: 13px; } table.codegrid td { padding: 0!important; border: 0!important } table td.linenumber { width: 40px!important; } 
        </style>
      </head>
      <body style="font-family: monospace;">
        <ul class="nav nav-tabs">
          <li>
            <a href="#codegrid" data-toggle="tab">Codegrid</a>
          </li>
          <li>
            <a href="#statementlist" data-toggle="tab">Statement List</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="codegrid">
            <pre style='font-size: 12pt; font-family: courier, monospace;'>1 <span style=''>package model.strategy
</span>2 <span style=''>
</span>3 <span style=''>import model.map.{CityModule, WorldMapModule}
</span>4 <span style=''>import model.map.CityModule.*
</span>5 <span style=''>import model.map.CityModule.CityImpl.{City, createCity}
</span>6 <span style=''>import model.map.WorldMapModule.WorldMap
</span>7 <span style=''>import model.strategy.AiAbility.AiAbility
</span>8 <span style=''>import model.strategy.ExecuteActionResult.ExecuteActionResult
</span>9 <span style=''>import model.util.GameSettings
</span>10 <span style=''>import model.util.GameSettings.{AIStats, Difficulty, GameSettings, given}
</span>11 <span style=''>
</span>12 <span style=''>import util.chaining.scalaUtilChainingOps
</span>13 <span style=''>import scala.util.Random
</span>14 <span style=''>
</span>15 <span style=''>/**
</span>16 <span style=''> * Represents the AI-controlled player in the game.
</span>17 <span style=''> * Handles execution of AI-specific actions such as infecting, sabotaging, and evolving.
</span>18 <span style=''> */
</span>19 <span style=''>trait PlayerAI extends PlayerEntity:
</span>20 <span style=''>  /**
</span>21 <span style=''>   * The set of currently unlocked abilities by the AI.
</span>22 <span style=''>   */
</span>23 <span style=''>  def unlockedAbilities: Set[AiAbility]
</span>24 <span style=''>
</span>25 <span style=''>  /**
</span>26 <span style=''>   * A chronological list of actions the AI has executed.
</span>27 <span style=''>   */
</span>28 <span style=''>  def executedActions: List[AiAction]
</span>29 <span style=''>
</span>30 <span style=''>  /**
</span>31 <span style=''>   * The current chance (percentage) of successfully infecting a city.
</span>32 <span style=''>   */
</span>33 <span style=''>  def infectionPower: Int
</span>34 <span style=''>
</span>35 <span style=''>  /**
</span>36 <span style=''>   * The current power level of sabotage actions.
</span>37 <span style=''>   */
</span>38 <span style=''>  def sabotagePower: Int
</span>39 <span style=''>
</span>40 <span style=''>  /**
</span>41 <span style=''>   * The set of cities that have been conquered via infection.
</span>42 <span style=''>   */
</span>43 <span style=''>  def conqueredCities: Set[String]
</span>44 <span style=''>
</span>45 <span style=''>  /**
</span>46 <span style=''>   * The set of cities that have been sabotaged.
</span>47 <span style=''>   */
</span>48 <span style=''>  def sabotagedCities: Set[String]
</span>49 <span style=''>
</span>50 <span style=''>  /**
</span>51 <span style=''>   * Computes the list of valid AI actions based on the current state.
</span>52 <span style=''>   */
</span>53 <span style=''>  def getPossibleAction: List[AiAction]
</span>54 <span style=''>
</span>55 <span style=''>  override type ValidAction = AiAction
</span>56 <span style=''>  override type Self = PlayerAI
</span>57 <span style=''>
</span>58 <span style=''>  /**
</span>59 <span style=''>   * Executes a given action and returns the result, including updates to state and city (if any).
</span>60 <span style=''>   *
</span>61 <span style=''>   * @param action    The AI action to execute.
</span>62 <span style=''>   * @param worldMap  The current world map context.
</span>63 <span style=''>   * @return A result object containing the updated AI state, affected city (if any), and log messages.
</span>64 <span style=''>   */
</span>65 <span style=''>  override def executeAction(action: ValidAction, worldMap: WorldMap): ExecuteActionResult[Self]
</span>66 <span style=''>
</span>67 <span style=''>  override def toString: String
</span>68 <span style=''>
</span>69 <span style=''>/**
</span>70 <span style=''> * Companion object for the PlayerAI trait.
</span>71 <span style=''> */
</span>72 <span style=''>object PlayerAI:
</span>73 <span style=''>
</span>74 <span style=''>  /**
</span>75 <span style=''>   * Constructs a PlayerAI instance using given AI statistics.
</span>76 <span style=''>   *
</span>77 <span style=''>   * @param stats Implicit AIStats (e.g. based on game difficulty).
</span>78 <span style=''>   * @return A new PlayerAI instance.
</span>79 <span style=''>   */
</span>80 <span style=''>  </span><span style='background: #AEF1AE'>def fromStats</span><span style=''>(using stats: AIStats): PlayerAI =
</span>81 <span style=''>    </span><span style='background: #AEF1AE'>PlayerAIImpl</span><span style=''>(infectionPower = stats.infectionPower, sabotagePower = stats.sabotagePower)
</span>82 <span style=''>
</span>83 <span style=''>  /**
</span>84 <span style=''>   * Constructs a PlayerAI instance using a complete GameSettings context.
</span>85 <span style=''>   *
</span>86 <span style=''>   * @param settings Implicit GameSettings containing AI configuration.
</span>87 <span style=''>   * @return A new PlayerAI instance.
</span>88 <span style=''>   */
</span>89 <span style=''>  </span><span style='background: #AEF1AE'>def fromSettings</span><span style=''>(using settings: GameSettings): PlayerAI =
</span>90 <span style=''>    </span><span style='background: #AEF1AE'>PlayerAIImpl</span><span style=''>(
</span>91 <span style=''>      infectionPower = settings.ai.infectionPower,
</span>92 <span style=''>      sabotagePower = settings.ai.sabotagePower
</span>93 <span style=''>    )
</span>94 <span style=''>
</span>95 <span style=''>/**
</span>96 <span style=''> * Concrete implementation of the PlayerAI trait.
</span>97 <span style=''> *
</span>98 <span style=''> * @param unlockedAbilities The set of AI abilities unlocked so far.
</span>99 <span style=''> * @param executedActions   The list of actions the AI has taken.
</span>100 <span style=''> * @param infectionPower   Probability to infect a city.
</span>101 <span style=''> * @param sabotagePower     Power level for sabotaging cities.
</span>102 <span style=''> * @param conqueredCities   Set of names of conquered cities.
</span>103 <span style=''> * @param sabotagedCities   Set of names of sabotaged cities.
</span>104 <span style=''> */
</span>105 <span style=''>private case class PlayerAIImpl (
</span>106 <span style=''>                                  unlockedAbilities : Set[AiAbility] = </span><span style='background: #AEF1AE'>Set.empty</span><span style=''>,
</span>107 <span style=''>                                  executedActions: List[AiAction] = </span><span style='background: #AEF1AE'>List.empty</span><span style=''>,
</span>108 <span style=''>                                  infectionPower: Int,
</span>109 <span style=''>                                  sabotagePower: Int,
</span>110 <span style=''>                                  conqueredCities: Set[String] = </span><span style='background: #AEF1AE'>Set.empty</span><span style=''>,
</span>111 <span style=''>                                  sabotagedCities: Set[String] = </span><span style='background: #AEF1AE'>Set.empty</span><span style=''>
</span>112 <span style=''>                                ) extends PlayerAI:
</span>113 <span style=''>
</span>114 <span style=''>  override type ValidAction = AiAction
</span>115 <span style=''>  override type Self = PlayerAI
</span>116 <span style=''>
</span>117 <span style=''>  /** @inheritdoc */
</span>118 <span style=''>  </span><span style='background: #AEF1AE'>override def executeAction</span><span style=''>(action: ValidAction, worldMap: WorldMap): ExecuteActionResult[Self] =
</span>119 <span style=''>    </span><span style='background: #AEF1AE'>doExecuteAction(action, worldMap)</span><span style=''>
</span>120 <span style=''>
</span>121 <span style=''>  /**
</span>122 <span style=''>   * Internal dispatcher for executing AI actions.
</span>123 <span style=''>   */
</span>124 <span style=''>  </span><span style='background: #AEF1AE'>private def doExecuteAction</span><span style=''>(action: AiAction, worldMap: WorldMap): ExecuteActionResult[Self] = action match
</span>125 <span style=''>    </span><span style='background: #AEF1AE'>case Infect(targets)</span><span style=''> =&gt; </span><span style='background: #AEF1AE'>infect(targets, worldMap)</span><span style=''>
</span>126 <span style=''>    </span><span style='background: #AEF1AE'>case Sabotage(targets)</span><span style=''> =&gt; </span><span style='background: #AEF1AE'>sabotage(targets, worldMap)</span><span style=''>
</span>127 <span style=''>    </span><span style='background: #AEF1AE'>case Evolve</span><span style=''> =&gt; </span><span style='background: #AEF1AE'>evolve</span><span style=''>
</span>128 <span style=''>
</span>129 <span style=''>  /** @inheritdoc */
</span>130 <span style=''>  </span><span style='background: #AEF1AE'>override def getPossibleAction</span><span style=''>: List[AiAction] =
</span>131 <span style=''>    </span><span style='background: #AEF1AE'>AiAction.allActions.filter { action =&gt;
</span>132 <span style=''></span><span style='background: #AEF1AE'>      (AiAbility.allAbilities -- unlockedAbilities).nonEmpty || action != Evolve
</span>133 <span style=''></span><span style='background: #AEF1AE'>    }</span><span style=''>
</span>134 <span style=''>
</span>135 <span style=''>  /** @inheritdoc */
</span>136 <span style=''>  </span><span style='background: #AEF1AE'>override def toString</span><span style=''>: String =
</span>137 <span style=''>    </span><span style='background: #AEF1AE'>s&quot;&quot;&quot;|--- PlayerAI Status ---
</span>138 <span style=''></span><span style='background: #AEF1AE'>        |Unlocked Abilities   : ${if (unlockedAbilities.isEmpty) </span><span style='background: #F0ADAD'>&quot;None&quot;</span><span style='background: #AEF1AE'> else unlockedAbilities.mkString(&quot;, &quot;)}
</span>139 <span style=''></span><span style='background: #AEF1AE'>        |Infection Chance     : $infectionPower%
</span>140 <span style=''></span><span style='background: #AEF1AE'>        |Sabotage Power       : $sabotagePower
</span>141 <span style=''></span><span style='background: #AEF1AE'>        |Conquered Cities     : ${if (conqueredCities.isEmpty) </span><span style='background: #F0ADAD'>&quot;None&quot;</span><span style='background: #AEF1AE'> else conqueredCities.mkString(&quot;, &quot;)}
</span>142 <span style=''></span><span style='background: #AEF1AE'>        |Sabotaged Cities     : ${if (sabotagedCities.isEmpty) </span><span style='background: #F0ADAD'>&quot;None&quot;</span><span style='background: #AEF1AE'> else sabotagedCities.mkString(&quot;, &quot;)}
</span>143 <span style=''></span><span style='background: #AEF1AE'>        |Executed Actions     :
</span>144 <span style=''></span><span style='background: #AEF1AE'>        |  ${if (executedActions.isEmpty) </span><span style='background: #F0ADAD'>&quot;None&quot;</span><span style='background: #AEF1AE'> else executedActions.reverse.mkString(&quot;\n  &quot;)}
</span>145 <span style=''></span><span style='background: #AEF1AE'>        |------------------------
</span>146 <span style=''></span><span style='background: #AEF1AE'>     &quot;&quot;&quot;.stripMargin</span><span style=''>
</span>147 <span style=''>
</span>148 <span style=''>  /**
</span>149 <span style=''>   * Adds a newly unlocked ability to the AI, updating its stats.
</span>150 <span style=''>   *
</span>151 <span style=''>   * @param ability The ability to unlock.
</span>152 <span style=''>   * @return A new updated PlayerAIImpl instance.
</span>153 <span style=''>   */
</span>154 <span style=''>  </span><span style='background: #AEF1AE'>private def withNewAbility</span><span style=''>(ability: AiAbility): PlayerAIImpl = copy(
</span>155 <span style=''>    unlockedAbilities = </span><span style='background: #AEF1AE'>unlockedAbilities + ability</span><span style=''>,
</span>156 <span style=''>    infectionPower = </span><span style='background: #AEF1AE'>math.round(infectionPower * (1 + ability.infectionBonusPerc / 100.0))</span><span style=''>.toInt,
</span>157 <span style=''>    sabotagePower = </span><span style='background: #AEF1AE'>math.round(sabotagePower * (1 + ability.sabotageBonusPerc / 100.0))</span><span style=''>.toInt
</span>158 <span style=''>  )
</span>159 <span style=''>
</span>160 <span style=''>  /**
</span>161 <span style=''>   * Performs the evolve action, unlocking a new ability if available.
</span>162 <span style=''>   * @return ExecutionActionResult containing the updated value
</span>163 <span style=''>   */
</span>164 <span style=''>  </span><span style='background: #AEF1AE'>private def evolve</span><span style=''>: ExecuteActionResult[Self] =
</span>165 <span style=''>    val updatedPlayer: PlayerAIImpl = </span><span style='background: #F0ADAD'>AiAbility.allAbilities
</span>166 <span style=''></span><span style='background: #F0ADAD'>      .diff(unlockedAbilities)
</span>167 <span style=''></span><span style='background: #F0ADAD'>      .toList
</span>168 <span style=''></span><span style='background: #F0ADAD'>      .pipe(Random.shuffle)
</span>169 <span style=''></span><span style='background: #F0ADAD'>      .headOption</span><span style='background: #AEF1AE'>
</span>170 <span style=''></span><span style='background: #AEF1AE'>      .fold(this)(withNewAbility)
</span>171 <span style=''></span><span style='background: #AEF1AE'>      .addAction(Evolve)</span><span style=''>
</span>172 <span style=''>    </span><span style='background: #AEF1AE'>ExecuteActionResult.apply(updatedPlayer, None, </span><span style='background: #F0ADAD'>List</span><span style='background: #AEF1AE'>(s&quot;Evolve, you have unlocked: $unlockedAbilities\n&quot;))</span><span style=''>
</span>173 <span style=''>
</span>174 <span style=''>  /**
</span>175 <span style=''>   * Performs the infect action on a list of city names.
</span>176 <span style=''>   *
</span>177 <span style=''>   * @param cities    The list of target cities.
</span>178 <span style=''>   * @param worldMap  The game map context.
</span>179 <span style=''>   * @return Execution result containing updated state and possibly infected city.
</span>180 <span style=''>   */
</span>181 <span style=''>  </span><span style='background: #AEF1AE'>private def infect</span><span style=''>(cities: List[String], worldMap: WorldMap): ExecuteActionResult[Self] =
</span>182 <span style=''>    val updatedPlayer: PlayerAIImpl = </span><span style='background: #AEF1AE'>copy(conqueredCities = conqueredCities ++ cities).addAction(Infect(cities))</span><span style=''>
</span>183 <span style=''>    val infectedCities: List[City] = </span><span style='background: #AEF1AE'>cities.flatMap(cityName =&gt;
</span>184 <span style=''></span><span style='background: #AEF1AE'>      </span><span style='background: #F0ADAD'>worldMap.getCityByName(cityName)</span><span style='background: #AEF1AE'>.map(_.infectCity())
</span>185 <span style=''></span><span style='background: #AEF1AE'>    )</span><span style=''>
</span>186 <span style=''>    </span><span style='background: #AEF1AE'>ExecuteActionResult.apply(updatedPlayer, Some(infectedCities), </span><span style='background: #F0ADAD'>List</span><span style='background: #AEF1AE'>(s&quot;Infect, you have infected: $conqueredCities\n&quot;))</span><span style=''>
</span>187 <span style=''>
</span>188 <span style=''>  /**
</span>189 <span style=''>   * Performs the sabotage action on a list of city names.
</span>190 <span style=''>   *
</span>191 <span style=''>   * @param cities    The list of target cities.
</span>192 <span style=''>   * @param worldMap  The game map context.
</span>193 <span style=''>   * @return Execution result containing updated state and possibly sabotaged city.
</span>194 <span style=''>   */
</span>195 <span style=''>  </span><span style='background: #AEF1AE'>private def sabotage</span><span style=''>(cities: List[String], worldMap: WorldMap): ExecuteActionResult[Self] =
</span>196 <span style=''>    val updatedPlayer: PlayerAIImpl = </span><span style='background: #AEF1AE'>copy(sabotagedCities = sabotagedCities ++ cities).addAction(Sabotage(cities))</span><span style=''>
</span>197 <span style=''>    val sabotagedCityList: List[City] = </span><span style='background: #AEF1AE'>cities.flatMap(cityName =&gt;
</span>198 <span style=''></span><span style='background: #AEF1AE'>      </span><span style='background: #F0ADAD'>worldMap.getCityByName(cityName)</span><span style='background: #AEF1AE'>.map(_.sabotateCity(sabotagePower))
</span>199 <span style=''></span><span style='background: #AEF1AE'>    )</span><span style=''>
</span>200 <span style=''>    </span><span style='background: #AEF1AE'>ExecuteActionResult.apply(updatedPlayer, Some(sabotagedCityList), </span><span style='background: #F0ADAD'>List</span><span style='background: #AEF1AE'>(s&quot;Sabotage, you have sabotaged: $sabotagedCities\n&quot;))</span><span style=''>
</span>201 <span style=''>
</span>202 <span style=''>  /**
</span>203 <span style=''>   * Adds an executed action to the internal history.
</span>204 <span style=''>   *
</span>205 <span style=''>   * @param action The action to log.
</span>206 <span style=''>   * @return Updated PlayerAIImpl with action added.
</span>207 <span style=''>   */
</span>208 <span style=''>  </span><span style='background: #AEF1AE'>private def addAction</span><span style=''>(action: AiAction): PlayerAIImpl =
</span>209 <span style=''>    copy(executedActions = </span><span style='background: #AEF1AE'>action :: executedActions</span><span style=''>)
</span></pre>
          </div>
          <div class="tab-pane" id="statementlist">
            <table cellspacing="0" cellpadding="0" class="table statementlist">
      <tr>
        <th>Line</th>
        <th>Stmt Id</th>
        <th>Pos</th>
        <th>Tree</th>
        <th>Symbol</th>
        <th>Tests</th>
        <th>Code</th>
      </tr><tr>
        <td>
          79
        </td>
        <td>
          532
        </td>
        <td>
          2270
          -
          2283
        </td>
        <td>
          DefDef
        </td>
        <td>
          fromStats
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          def fromStats
        </td>
      </tr><tr>
        <td>
          80
        </td>
        <td>
          528
        </td>
        <td>
          2323
          -
          2335
        </td>
        <td>
          Select
        </td>
        <td>
          $lessinit$greater$default$1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          PlayerAIImpl
        </td>
      </tr><tr>
        <td>
          80
        </td>
        <td>
          531
        </td>
        <td>
          2323
          -
          2335
        </td>
        <td>
          Select
        </td>
        <td>
          $lessinit$greater$default$6
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          PlayerAIImpl
        </td>
      </tr><tr>
        <td>
          80
        </td>
        <td>
          530
        </td>
        <td>
          2323
          -
          2335
        </td>
        <td>
          Select
        </td>
        <td>
          $lessinit$greater$default$5
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          PlayerAIImpl
        </td>
      </tr><tr>
        <td>
          80
        </td>
        <td>
          529
        </td>
        <td>
          2323
          -
          2335
        </td>
        <td>
          Select
        </td>
        <td>
          $lessinit$greater$default$2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          PlayerAIImpl
        </td>
      </tr><tr>
        <td>
          88
        </td>
        <td>
          537
        </td>
        <td>
          2625
          -
          2641
        </td>
        <td>
          DefDef
        </td>
        <td>
          fromSettings
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          def fromSettings
        </td>
      </tr><tr>
        <td>
          89
        </td>
        <td>
          534
        </td>
        <td>
          2689
          -
          2701
        </td>
        <td>
          Select
        </td>
        <td>
          $lessinit$greater$default$2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          PlayerAIImpl
        </td>
      </tr><tr>
        <td>
          89
        </td>
        <td>
          533
        </td>
        <td>
          2689
          -
          2701
        </td>
        <td>
          Select
        </td>
        <td>
          $lessinit$greater$default$1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          PlayerAIImpl
        </td>
      </tr><tr>
        <td>
          89
        </td>
        <td>
          536
        </td>
        <td>
          2689
          -
          2701
        </td>
        <td>
          Select
        </td>
        <td>
          $lessinit$greater$default$6
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          PlayerAIImpl
        </td>
      </tr><tr>
        <td>
          89
        </td>
        <td>
          535
        </td>
        <td>
          2689
          -
          2701
        </td>
        <td>
          Select
        </td>
        <td>
          $lessinit$greater$default$5
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          PlayerAIImpl
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          618
        </td>
        <td>
          3370
          -
          3370
        </td>
        <td>
          DefDef
        </td>
        <td>
          $lessinit$greater$default$1
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          617
        </td>
        <td>
          3370
          -
          3379
        </td>
        <td>
          Select
        </td>
        <td>
          empty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Set.empty
        </td>
      </tr><tr>
        <td>
          105
        </td>
        <td>
          616
        </td>
        <td>
          3370
          -
          3373
        </td>
        <td>
          Ident
        </td>
        <td>
          Set
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Set
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          621
        </td>
        <td>
          3450
          -
          3450
        </td>
        <td>
          DefDef
        </td>
        <td>
          $lessinit$greater$default$2
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          620
        </td>
        <td>
          3450
          -
          3460
        </td>
        <td>
          Select
        </td>
        <td>
          empty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          List.empty
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          619
        </td>
        <td>
          3450
          -
          3454
        </td>
        <td>
          Ident
        </td>
        <td>
          List
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          List
        </td>
      </tr><tr>
        <td>
          109
        </td>
        <td>
          624
        </td>
        <td>
          3639
          -
          3639
        </td>
        <td>
          DefDef
        </td>
        <td>
          $lessinit$greater$default$5
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          
        </td>
      </tr><tr>
        <td>
          109
        </td>
        <td>
          623
        </td>
        <td>
          3639
          -
          3648
        </td>
        <td>
          Select
        </td>
        <td>
          empty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Set.empty
        </td>
      </tr><tr>
        <td>
          109
        </td>
        <td>
          622
        </td>
        <td>
          3639
          -
          3642
        </td>
        <td>
          Ident
        </td>
        <td>
          Set
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Set
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          627
        </td>
        <td>
          3716
          -
          3716
        </td>
        <td>
          DefDef
        </td>
        <td>
          $lessinit$greater$default$6
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          626
        </td>
        <td>
          3716
          -
          3725
        </td>
        <td>
          Select
        </td>
        <td>
          empty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Set.empty
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          625
        </td>
        <td>
          3716
          -
          3719
        </td>
        <td>
          Ident
        </td>
        <td>
          Set
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          Set
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          539
        </td>
        <td>
          3881
          -
          3907
        </td>
        <td>
          DefDef
        </td>
        <td>
          executeAction
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          override def executeAction
        </td>
      </tr><tr>
        <td>
          118
        </td>
        <td>
          538
        </td>
        <td>
          3983
          -
          4016
        </td>
        <td>
          Apply
        </td>
        <td>
          doExecuteAction
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          doExecuteAction(action, worldMap)
        </td>
      </tr><tr>
        <td>
          123
        </td>
        <td>
          546
        </td>
        <td>
          4088
          -
          4115
        </td>
        <td>
          DefDef
        </td>
        <td>
          doExecuteAction
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          private def doExecuteAction
        </td>
      </tr><tr>
        <td>
          124
        </td>
        <td>
          541
        </td>
        <td>
          4225
          -
          4250
        </td>
        <td>
          Apply
        </td>
        <td>
          infect
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          infect(targets, worldMap)
        </td>
      </tr><tr>
        <td>
          124
        </td>
        <td>
          540
        </td>
        <td>
          4201
          -
          4221
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;none&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          case Infect(targets)
        </td>
      </tr><tr>
        <td>
          125
        </td>
        <td>
          543
        </td>
        <td>
          4282
          -
          4309
        </td>
        <td>
          Apply
        </td>
        <td>
          sabotage
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          sabotage(targets, worldMap)
        </td>
      </tr><tr>
        <td>
          125
        </td>
        <td>
          542
        </td>
        <td>
          4256
          -
          4278
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;none&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          case Sabotage(targets)
        </td>
      </tr><tr>
        <td>
          126
        </td>
        <td>
          545
        </td>
        <td>
          4330
          -
          4336
        </td>
        <td>
          Select
        </td>
        <td>
          evolve
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          evolve
        </td>
      </tr><tr>
        <td>
          126
        </td>
        <td>
          544
        </td>
        <td>
          4315
          -
          4326
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;none&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          case Evolve
        </td>
      </tr><tr>
        <td>
          129
        </td>
        <td>
          550
        </td>
        <td>
          4364
          -
          4394
        </td>
        <td>
          DefDef
        </td>
        <td>
          getPossibleAction
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          override def getPossibleAction
        </td>
      </tr><tr>
        <td>
          130
        </td>
        <td>
          547
        </td>
        <td>
          4418
          -
          4545
        </td>
        <td>
          Apply
        </td>
        <td>
          filter
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          AiAction.allActions.filter { action =&gt;\r\n      (AiAbility.allAbilities -- unlockedAbilities).nonEmpty || action != Evolve\r\n    }
        </td>
      </tr><tr>
        <td>
          131
        </td>
        <td>
          549
        </td>
        <td>
          4464
          -
          4518
        </td>
        <td>
          Select
        </td>
        <td>
          nonEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          (AiAbility.allAbilities -- unlockedAbilities).nonEmpty
        </td>
      </tr><tr>
        <td>
          131
        </td>
        <td>
          548
        </td>
        <td>
          4465
          -
          4508
        </td>
        <td>
          Apply
        </td>
        <td>
          --
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          AiAbility.allAbilities -- unlockedAbilities
        </td>
      </tr><tr>
        <td>
          135
        </td>
        <td>
          571
        </td>
        <td>
          4573
          -
          4594
        </td>
        <td>
          DefDef
        </td>
        <td>
          toString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          override def toString
        </td>
      </tr><tr>
        <td>
          136
        </td>
        <td>
          552
        </td>
        <td>
          4610
          -
          5239
        </td>
        <td>
          Apply
        </td>
        <td>
          s
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          s&quot;&quot;&quot;|--- PlayerAI Status ---\r\n        |Unlocked Abilities   : ${if (unlockedAbilities.isEmpty) &quot;None&quot; else unlockedAbilities.mkString(&quot;, &quot;)}\r\n        |Infection Chance     : $infectionPower%\r\n        |Sabotage Power       : $sabotagePower\r\n        |Conquered Cities     : ${if (conqueredCities.isEmpty) &quot;None&quot; else conqueredCities.mkString(&quot;, &quot;)}\r\n        |Sabotaged Cities     : ${if (sabotagedCities.isEmpty) &quot;None&quot; else sabotagedCities.mkString(&quot;, &quot;)}\r\n        |Executed Actions     :\r\n        |  ${if (executedActions.isEmpty) &quot;None&quot; else executedActions.reverse.mkString(&quot;\\n  &quot;)}\r\n        |------------------------\r\n     &quot;&quot;&quot;
        </td>
      </tr><tr>
        <td>
          136
        </td>
        <td>
          551
        </td>
        <td>
          4610
          -
          5239
        </td>
        <td>
          Apply
        </td>
        <td>
          augmentString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          s&quot;&quot;&quot;|--- PlayerAI Status ---\r\n        |Unlocked Abilities   : ${if (unlockedAbilities.isEmpty) &quot;None&quot; else unlockedAbilities.mkString(&quot;, &quot;)}\r\n        |Infection Chance     : $infectionPower%\r\n        |Sabotage Power       : $sabotagePower\r\n        |Conquered Cities     : ${if (conqueredCities.isEmpty) &quot;None&quot; else conqueredCities.mkString(&quot;, &quot;)}\r\n        |Sabotaged Cities     : ${if (sabotagedCities.isEmpty) &quot;None&quot; else sabotagedCities.mkString(&quot;, &quot;)}\r\n        |Executed Actions     :\r\n        |  ${if (executedActions.isEmpty) &quot;None&quot; else executedActions.reverse.mkString(&quot;\\n  &quot;)}\r\n        |------------------------\r\n     &quot;&quot;&quot;
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          555
        </td>
        <td>
          4717
          -
          4749
        </td>
        <td>
          Apply
        </td>
        <td>
          mkString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          unlockedAbilities.mkString(&quot;, &quot;)
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          554
        </td>
        <td>
          4705
          -
          4711
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;none&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;None&quot;
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          553
        </td>
        <td>
          4678
          -
          4703
        </td>
        <td>
          Select
        </td>
        <td>
          isEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          unlockedAbilities.isEmpty
        </td>
      </tr><tr>
        <td>
          137
        </td>
        <td>
          556
        </td>
        <td>
          4717
          -
          4749
        </td>
        <td>
          Apply
        </td>
        <td>
          mkString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          unlockedAbilities.mkString(&quot;, &quot;)
        </td>
      </tr><tr>
        <td>
          140
        </td>
        <td>
          559
        </td>
        <td>
          4925
          -
          4955
        </td>
        <td>
          Apply
        </td>
        <td>
          mkString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          conqueredCities.mkString(&quot;, &quot;)
        </td>
      </tr><tr>
        <td>
          140
        </td>
        <td>
          558
        </td>
        <td>
          4913
          -
          4919
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;none&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;None&quot;
        </td>
      </tr><tr>
        <td>
          140
        </td>
        <td>
          557
        </td>
        <td>
          4888
          -
          4911
        </td>
        <td>
          Select
        </td>
        <td>
          isEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          conqueredCities.isEmpty
        </td>
      </tr><tr>
        <td>
          140
        </td>
        <td>
          560
        </td>
        <td>
          4925
          -
          4955
        </td>
        <td>
          Apply
        </td>
        <td>
          mkString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          conqueredCities.mkString(&quot;, &quot;)
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          561
        </td>
        <td>
          4996
          -
          5019
        </td>
        <td>
          Select
        </td>
        <td>
          isEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          sabotagedCities.isEmpty
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          564
        </td>
        <td>
          5033
          -
          5063
        </td>
        <td>
          Apply
        </td>
        <td>
          mkString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          sabotagedCities.mkString(&quot;, &quot;)
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          563
        </td>
        <td>
          5033
          -
          5063
        </td>
        <td>
          Apply
        </td>
        <td>
          mkString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          sabotagedCities.mkString(&quot;, &quot;)
        </td>
      </tr><tr>
        <td>
          141
        </td>
        <td>
          562
        </td>
        <td>
          5021
          -
          5027
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;none&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;None&quot;
        </td>
      </tr><tr>
        <td>
          143
        </td>
        <td>
          568
        </td>
        <td>
          5153
          -
          5176
        </td>
        <td>
          Select
        </td>
        <td>
          reverse
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          executedActions.reverse
        </td>
      </tr><tr>
        <td>
          143
        </td>
        <td>
          567
        </td>
        <td>
          5153
          -
          5193
        </td>
        <td>
          Apply
        </td>
        <td>
          mkString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          executedActions.reverse.mkString(&quot;\\n  &quot;)
        </td>
      </tr><tr>
        <td>
          143
        </td>
        <td>
          566
        </td>
        <td>
          5141
          -
          5147
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;none&gt;
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          &quot;None&quot;
        </td>
      </tr><tr>
        <td>
          143
        </td>
        <td>
          569
        </td>
        <td>
          5153
          -
          5193
        </td>
        <td>
          Apply
        </td>
        <td>
          mkString
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          executedActions.reverse.mkString(&quot;\\n  &quot;)
        </td>
      </tr><tr>
        <td>
          143
        </td>
        <td>
          565
        </td>
        <td>
          5116
          -
          5139
        </td>
        <td>
          Select
        </td>
        <td>
          isEmpty
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          executedActions.isEmpty
        </td>
      </tr><tr>
        <td>
          145
        </td>
        <td>
          570
        </td>
        <td>
          4610
          -
          5251
        </td>
        <td>
          Select
        </td>
        <td>
          stripMargin
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          s&quot;&quot;&quot;|--- PlayerAI Status ---\r\n        |Unlocked Abilities   : ${if (unlockedAbilities.isEmpty) &quot;None&quot; else unlockedAbilities.mkString(&quot;, &quot;)}\r\n        |Infection Chance     : $infectionPower%\r\n        |Sabotage Power       : $sabotagePower\r\n        |Conquered Cities     : ${if (conqueredCities.isEmpty) &quot;None&quot; else conqueredCities.mkString(&quot;, &quot;)}\r\n        |Sabotaged Cities     : ${if (sabotagedCities.isEmpty) &quot;None&quot; else sabotagedCities.mkString(&quot;, &quot;)}\r\n        |Executed Actions     :\r\n        |  ${if (executedActions.isEmpty) &quot;None&quot; else executedActions.reverse.mkString(&quot;\\n  &quot;)}\r\n        |------------------------\r\n     &quot;&quot;&quot;.stripMargin
        </td>
      </tr><tr>
        <td>
          153
        </td>
        <td>
          577
        </td>
        <td>
          5439
          -
          5465
        </td>
        <td>
          DefDef
        </td>
        <td>
          withNewAbility
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          private def withNewAbility
        </td>
      </tr><tr>
        <td>
          154
        </td>
        <td>
          572
        </td>
        <td>
          5533
          -
          5560
        </td>
        <td>
          Apply
        </td>
        <td>
          +
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          unlockedAbilities + ability
        </td>
      </tr><tr>
        <td>
          155
        </td>
        <td>
          573
        </td>
        <td>
          5584
          -
          5653
        </td>
        <td>
          Apply
        </td>
        <td>
          round
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          math.round(infectionPower * (1 + ability.infectionBonusPerc / 100.0))
        </td>
      </tr><tr>
        <td>
          155
        </td>
        <td>
          574
        </td>
        <td>
          5617
          -
          5643
        </td>
        <td>
          Select
        </td>
        <td>
          infectionBonusPerc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ability.infectionBonusPerc
        </td>
      </tr><tr>
        <td>
          156
        </td>
        <td>
          576
        </td>
        <td>
          5714
          -
          5739
        </td>
        <td>
          Select
        </td>
        <td>
          sabotageBonusPerc
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ability.sabotageBonusPerc
        </td>
      </tr><tr>
        <td>
          156
        </td>
        <td>
          575
        </td>
        <td>
          5682
          -
          5749
        </td>
        <td>
          Apply
        </td>
        <td>
          round
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          math.round(sabotagePower * (1 + ability.sabotageBonusPerc / 100.0))
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          591
        </td>
        <td>
          5917
          -
          5935
        </td>
        <td>
          DefDef
        </td>
        <td>
          evolve
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          private def evolve
        </td>
      </tr><tr>
        <td>
          164
        </td>
        <td>
          581
        </td>
        <td>
          6004
          -
          6073
        </td>
        <td>
          Apply
        </td>
        <td>
          scalaUtilChainingOps
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          AiAbility.allAbilities\r\n      .diff(unlockedAbilities)\r\n      .toList
        </td>
      </tr><tr>
        <td>
          165
        </td>
        <td>
          582
        </td>
        <td>
          6004
          -
          6058
        </td>
        <td>
          Apply
        </td>
        <td>
          diff
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          AiAbility.allAbilities\r\n      .diff(unlockedAbilities)
        </td>
      </tr><tr>
        <td>
          166
        </td>
        <td>
          583
        </td>
        <td>
          6004
          -
          6073
        </td>
        <td>
          Select
        </td>
        <td>
          toList
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          AiAbility.allAbilities\r\n      .diff(unlockedAbilities)\r\n      .toList
        </td>
      </tr><tr>
        <td>
          167
        </td>
        <td>
          584
        </td>
        <td>
          6087
          -
          6101
        </td>
        <td>
          Apply
        </td>
        <td>
          shuffle
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          Random.shuffle
        </td>
      </tr><tr>
        <td>
          167
        </td>
        <td>
          580
        </td>
        <td>
          6004
          -
          6102
        </td>
        <td>
          Apply
        </td>
        <td>
          pipe
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          AiAbility.allAbilities\r\n      .diff(unlockedAbilities)\r\n      .toList\r\n      .pipe(Random.shuffle)
        </td>
      </tr><tr>
        <td>
          168
        </td>
        <td>
          585
        </td>
        <td>
          6004
          -
          6121
        </td>
        <td>
          Select
        </td>
        <td>
          headOption
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          AiAbility.allAbilities\r\n      .diff(unlockedAbilities)\r\n      .toList\r\n      .pipe(Random.shuffle)\r\n      .headOption
        </td>
      </tr><tr>
        <td>
          169
        </td>
        <td>
          579
        </td>
        <td>
          6004
          -
          6156
        </td>
        <td>
          Apply
        </td>
        <td>
          fold
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          AiAbility.allAbilities\r\n      .diff(unlockedAbilities)\r\n      .toList\r\n      .pipe(Random.shuffle)\r\n      .headOption\r\n      .fold(this)(withNewAbility)
        </td>
      </tr><tr>
        <td>
          169
        </td>
        <td>
          586
        </td>
        <td>
          6141
          -
          6155
        </td>
        <td>
          Apply
        </td>
        <td>
          withNewAbility
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          withNewAbility
        </td>
      </tr><tr>
        <td>
          170
        </td>
        <td>
          578
        </td>
        <td>
          6004
          -
          6182
        </td>
        <td>
          Apply
        </td>
        <td>
          addAction
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          AiAbility.allAbilities\r\n      .diff(unlockedAbilities)\r\n      .toList\r\n      .pipe(Random.shuffle)\r\n      .headOption\r\n      .fold(this)(withNewAbility)\r\n      .addAction(Evolve)
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          588
        </td>
        <td>
          6235
          -
          6291
        </td>
        <td>
          Apply
        </td>
        <td>
          apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          List(s&quot;Evolve, you have unlocked: $unlockedAbilities\\n&quot;)
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          590
        </td>
        <td>
          6240
          -
          6290
        </td>
        <td>
          Apply
        </td>
        <td>
          s
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          s&quot;Evolve, you have unlocked: $unlockedAbilities\\n&quot;
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          587
        </td>
        <td>
          6188
          -
          6292
        </td>
        <td>
          Apply
        </td>
        <td>
          apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ExecuteActionResult.apply(updatedPlayer, None, List(s&quot;Evolve, you have unlocked: $unlockedAbilities\\n&quot;))
        </td>
      </tr><tr>
        <td>
          171
        </td>
        <td>
          589
        </td>
        <td>
          6235
          -
          6239
        </td>
        <td>
          Ident
        </td>
        <td>
          List
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          List
        </td>
      </tr><tr>
        <td>
          180
        </td>
        <td>
          602
        </td>
        <td>
          6555
          -
          6573
        </td>
        <td>
          DefDef
        </td>
        <td>
          infect
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          private def infect
        </td>
      </tr><tr>
        <td>
          181
        </td>
        <td>
          593
        </td>
        <td>
          6707
          -
          6732
        </td>
        <td>
          Apply
        </td>
        <td>
          ++
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          conqueredCities ++ cities
        </td>
      </tr><tr>
        <td>
          181
        </td>
        <td>
          592
        </td>
        <td>
          6684
          -
          6759
        </td>
        <td>
          Apply
        </td>
        <td>
          addAction
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          copy(conqueredCities = conqueredCities ++ cities).addAction(Infect(cities))
        </td>
      </tr><tr>
        <td>
          182
        </td>
        <td>
          594
        </td>
        <td>
          6798
          -
          6891
        </td>
        <td>
          Apply
        </td>
        <td>
          flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          cities.flatMap(cityName =&gt;\r\n      worldMap.getCityByName(cityName).map(_.infectCity())\r\n    )
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          597
        </td>
        <td>
          6869
          -
          6883
        </td>
        <td>
          Apply
        </td>
        <td>
          infectCity
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          _.infectCity()
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          596
        </td>
        <td>
          6832
          -
          6864
        </td>
        <td>
          Apply
        </td>
        <td>
          getCityByName
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          worldMap.getCityByName(cityName)
        </td>
      </tr><tr>
        <td>
          183
        </td>
        <td>
          595
        </td>
        <td>
          6832
          -
          6884
        </td>
        <td>
          Apply
        </td>
        <td>
          map
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          worldMap.getCityByName(cityName).map(_.infectCity())
        </td>
      </tr><tr>
        <td>
          185
        </td>
        <td>
          600
        </td>
        <td>
          6960
          -
          6964
        </td>
        <td>
          Ident
        </td>
        <td>
          List
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          List
        </td>
      </tr><tr>
        <td>
          185
        </td>
        <td>
          599
        </td>
        <td>
          6960
          -
          7014
        </td>
        <td>
          Apply
        </td>
        <td>
          apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          List(s&quot;Infect, you have infected: $conqueredCities\\n&quot;)
        </td>
      </tr><tr>
        <td>
          185
        </td>
        <td>
          598
        </td>
        <td>
          6897
          -
          7015
        </td>
        <td>
          Apply
        </td>
        <td>
          apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ExecuteActionResult.apply(updatedPlayer, Some(infectedCities), List(s&quot;Infect, you have infected: $conqueredCities\\n&quot;))
        </td>
      </tr><tr>
        <td>
          185
        </td>
        <td>
          601
        </td>
        <td>
          6965
          -
          7013
        </td>
        <td>
          Apply
        </td>
        <td>
          s
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          s&quot;Infect, you have infected: $conqueredCities\\n&quot;
        </td>
      </tr><tr>
        <td>
          194
        </td>
        <td>
          613
        </td>
        <td>
          7281
          -
          7301
        </td>
        <td>
          DefDef
        </td>
        <td>
          sabotage
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          private def sabotage
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          603
        </td>
        <td>
          7412
          -
          7489
        </td>
        <td>
          Apply
        </td>
        <td>
          addAction
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          copy(sabotagedCities = sabotagedCities ++ cities).addAction(Sabotage(cities))
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          604
        </td>
        <td>
          7435
          -
          7460
        </td>
        <td>
          Apply
        </td>
        <td>
          ++
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          sabotagedCities ++ cities
        </td>
      </tr><tr>
        <td>
          196
        </td>
        <td>
          605
        </td>
        <td>
          7531
          -
          7639
        </td>
        <td>
          Apply
        </td>
        <td>
          flatMap
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          cities.flatMap(cityName =&gt;\r\n      worldMap.getCityByName(cityName).map(_.sabotateCity(sabotagePower))\r\n    )
        </td>
      </tr><tr>
        <td>
          197
        </td>
        <td>
          606
        </td>
        <td>
          7565
          -
          7632
        </td>
        <td>
          Apply
        </td>
        <td>
          map
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          worldMap.getCityByName(cityName).map(_.sabotateCity(sabotagePower))
        </td>
      </tr><tr>
        <td>
          197
        </td>
        <td>
          608
        </td>
        <td>
          7602
          -
          7631
        </td>
        <td>
          Apply
        </td>
        <td>
          sabotateCity
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          _.sabotateCity(sabotagePower)
        </td>
      </tr><tr>
        <td>
          197
        </td>
        <td>
          607
        </td>
        <td>
          7565
          -
          7597
        </td>
        <td>
          Apply
        </td>
        <td>
          getCityByName
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          worldMap.getCityByName(cityName)
        </td>
      </tr><tr>
        <td>
          199
        </td>
        <td>
          609
        </td>
        <td>
          7645
          -
          7769
        </td>
        <td>
          Apply
        </td>
        <td>
          apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          ExecuteActionResult.apply(updatedPlayer, Some(sabotagedCityList), List(s&quot;Sabotage, you have sabotaged: $sabotagedCities\\n&quot;))
        </td>
      </tr><tr>
        <td>
          199
        </td>
        <td>
          612
        </td>
        <td>
          7716
          -
          7767
        </td>
        <td>
          Apply
        </td>
        <td>
          s
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          s&quot;Sabotage, you have sabotaged: $sabotagedCities\\n&quot;
        </td>
      </tr><tr>
        <td>
          199
        </td>
        <td>
          611
        </td>
        <td>
          7711
          -
          7715
        </td>
        <td>
          Ident
        </td>
        <td>
          List
        </td>
        <td>
          
        </td>
        <td style="background: #F0ADAD">
          List
        </td>
      </tr><tr>
        <td>
          199
        </td>
        <td>
          610
        </td>
        <td>
          7711
          -
          7768
        </td>
        <td>
          Apply
        </td>
        <td>
          apply
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          List(s&quot;Sabotage, you have sabotaged: $sabotagedCities\\n&quot;)
        </td>
      </tr><tr>
        <td>
          207
        </td>
        <td>
          615
        </td>
        <td>
          7943
          -
          7964
        </td>
        <td>
          DefDef
        </td>
        <td>
          addAction
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          private def addAction
        </td>
      </tr><tr>
        <td>
          208
        </td>
        <td>
          614
        </td>
        <td>
          8027
          -
          8052
        </td>
        <td>
          Apply
        </td>
        <td>
          ::
        </td>
        <td>
          
        </td>
        <td style="background: #AEF1AE">
          action :: executedActions
        </td>
      </tr>
    </table>
          </div>
        </div>
      </body>
    </html>